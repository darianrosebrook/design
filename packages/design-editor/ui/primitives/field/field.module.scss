// Field primitive component styles
// Migrated from Tailwind to SCSS with design tokens

// Import generated token variables
@use './Field.tokens.generated.scss' as fieldTokens;

// Fieldset container
.field-set {
  // Include the generated variables mixin within the component scope
  @include fieldTokens.vars;
  display: var(--field-fieldset-display);
  flex-direction: var(--field-fieldset-flexDirection);

  // Gap adjustments for different group types
  gap: var(--field-spacing-gap-default);

  &:has([data-slot="checkbox-group"]),
  &:has([data-slot="radio-group"]) {
    gap: var(--field-spacing-gap-compact);
  }
}

// Field legend
.field-legend {
  margin-bottom: var(--field-spacing-margin-legend-bottom);
  font-weight: var(--field-typography-legend-fontWeight);
  line-height: var(--field-typography-legend-lineHeight);

  // Legend variants
  &[data-variant="legend"] {
    font-size: var(--field-typography-legend-fontSize-legend);
  }

  &[data-variant="label"] {
    font-size: var(--field-typography-legend-fontSize-label);
  }
}

// Field group container
.field-group {
  display: var(--field-layout-group-display);
  width: var(--field-layout-group-width);
  flex-direction: var(--field-layout-group-flexDirection);
  gap: var(--field-spacing-gap-group);

  // Nested group spacing
  [data-slot="field-group"] {
    gap: calc(var(--field-spacing-gap-group) - var(--field-spacing-gap-default));
  }
}

// Main field container
.field {
  display: var(--field-layout-field-display);
  width: var(--field-layout-field-width);
  gap: var(--field-spacing-gap-default);

  // Invalid state
  &[data-invalid="true"] {
    color: var(--field-colors-invalid-color);
  }

  // Orientation variants
  &[data-orientation="vertical"] {
    flex-direction: var(--field-layout-field-flexDirection-vertical);

    // Make all children full width
    > * {
      width: 100%;
    }

    // Labels should not be full width in vertical layout
    > [data-slot="field-label"] {
      width: auto;
    }
  }

  &[data-orientation="horizontal"] {
    flex-direction: var(--field-layout-field-flexDirection-horizontal);
    align-items: var(--field-layout-field-alignItems-horizontal);

    // Label gets flex auto, content takes remaining space
    > [data-slot="field-label"] {
      flex: 1 1 auto;
    }

    // Items with content should align to start
    &:has(> [data-slot="field-content"]) {
      align-items: flex-start;

      // Adjust checkbox/radio positioning
      [role="checkbox"],
      [role="radio"] {
        margin-top: 2px;
      }
    }
  }

  &[data-orientation="responsive"] {
    flex-direction: var(--field-layout-field-flexDirection-vertical);

    // All children full width in mobile
    > * {
      width: 100%;
    }

    // Labels should not be full width in mobile
    > [data-slot="field-label"] {
      width: auto;
    }

    // Responsive breakpoint
    @container (min-width: 768px) {
      flex-direction: var(--field-layout-field-flexDirection-horizontal);
      align-items: var(--field-layout-field-alignItems-horizontal);

      > * {
        width: auto;
      }

      > [data-slot="field-label"] {
        flex: 1 1 auto;
      }

      &:has(> [data-slot="field-content"]) {
        align-items: flex-start;

        [role="checkbox"],
        [role="radio"] {
          margin-top: 2px;
        }
      }
    }
  }

  // Disabled state
  &[data-disabled="true"] {
    [data-slot="field-label"] {
      opacity: var(--field-colors-disabled-opacity);
    }
  }
}

// Field content wrapper
.field-content {
  display: var(--field-layout-content-display);
  flex-direction: var(--field-layout-content-flexDirection);
  flex: var(--field-layout-content-flex);
  gap: var(--field-spacing-gap-content);
  line-height: 1.375; // Equivalent to leading-snug
}

// Field label
.field-label {
  display: var(--field-layout-label-display);
  width: var(--field-layout-label-width);
  align-items: var(--field-layout-label-alignItems);
  gap: var(--field-spacing-gap-compact);
  line-height: 1.375; // Equivalent to leading-snug
  opacity: 1;

  // Disabled state
  .field[data-disabled="true"] & {
    opacity: var(--field-colors-disabled-opacity);
  }

  // Labels containing nested fields
  &:has(> [data-slot="field"]) {
    width: 100%;
    flex-direction: column;
    border-radius: var(--semantic-border-radius-md);
    border: 1px solid transparent;

    > [data-slot="field"] {
      padding: var(--field-spacing-padding-label);
    }
  }

  // Checked state styling
  [data-state="checked"] & {
    background-color: var(--field-states-checked-backgroundColor-light);
    border-color: var(--field-states-checked-borderColor);

    // Dark mode
    .dark & {
      background-color: var(--field-states-checked-backgroundColor-dark);
    }
  }
}

// Field title
.field-title {
  display: flex;
  align-items: center;
  gap: var(--field-spacing-gap-compact);
  font-size: var(--field-typography-title-fontSize);
  font-weight: var(--field-typography-title-fontWeight);
  line-height: var(--field-typography-title-lineHeight);

  // Disabled state
  .field[data-disabled="true"] & {
    opacity: var(--field-colors-disabled-opacity);
  }
}

// Field description
.field-description {
  color: var(--field-typography-description-color);
  font-size: var(--field-typography-description-fontSize);
  font-weight: var(--field-typography-description-fontWeight);
  line-height: var(--field-typography-description-lineHeight);

  // Links within descriptions
  a {
    color: var(--semantic-color-action-background-primary-default);
    text-decoration: underline;
    text-underline-offset: 4px;
    text-decoration-thickness: 1px;
    text-decoration-color: var(--semantic-link-decoration-color);

    &:hover {
      color: var(--semantic-link-hover-text);
    }
  }

  // Balance text in horizontal layout
  .field[data-orientation="horizontal"] & {
    text-wrap: balance;
  }

  // Adjust margins
  &:last-child {
    margin-top: 0;
  }

  &:nth-last-child(2) {
    margin-top: calc(var(--field-spacing-gap-content) * -1);
  }

  // Adjust margin when following a legend
  [data-variant="legend"] + & {
    margin-top: calc(var(--field-spacing-margin-legend-bottom) * -1.5);
  }
}

// Field error
.field-error {
  color: var(--field-typography-error-color);
  font-size: var(--field-typography-error-fontSize);
  font-weight: var(--field-typography-error-fontWeight);

  // Error list styling
  ul {
    margin-left: 16px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    list-style-type: disc;
  }
}

// Field separator
.field-separator {
  position: relative;
  height: 20px;
  margin: var(--field-spacing-margin-separator-vertical) 0;

  // Content variant
  &[data-content] {
    span {
      background-color: var(--field-colors-separator-content-backgroundColor);
      color: var(--field-colors-separator-content-color);
      position: relative;
      margin: 0 auto;
      display: block;
      width: fit-content;
      padding: 0 var(--field-colors-separator-content-padding-horizontal);
    }
  }
}

// Separator content text
.field-separator-content {
  background-color: var(--field-colors-separator-content-backgroundColor);
  color: var(--field-colors-separator-content-color);
  position: relative;
  margin: 0 auto;
  display: block;
  width: fit-content;
  padding: 0 var(--field-colors-separator-content-padding-horizontal);
}
